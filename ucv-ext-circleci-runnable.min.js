require("source-map-support").install(),function(r){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=r,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function e(){return t.default}:function e(){return t};return a.d(e,"a",e),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=13)}([function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("@velocity/logger")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@babel/runtime/helpers/createClass")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("request-promise")},function(e,t){e.exports=require("@velocity/ucv-ext-npm-wrapper")},function(e,t){e.exports=require("url-parse")},function(e,t){e.exports=require("@babel/runtime/helpers/toConsumableArray")},function(e,t){e.exports=require("@velocity/api-client")},function(e,t,r){e.exports=r(14)},function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),t=r(9),n=r.n(t),t=r(0),k=r.n(t),t=r(1),f=r.n(t),t=r(3),h=r.n(t),t=r(4),m=r.n(t),t=r(6),i=r.n(t),t=r(8),p=r.n(t),t=r(5),d=r.n(t),t=r(10),y=r.n(t),v="%s/project/%s/%s/%s",b="%s/project/%s/%s/%s/pipeline?page-token=%s",g="%s/project/%s/%s/%s/pipeline",x="%s/pipeline/%s/workflow?page-token=%s",w="%s/pipeline/%s/workflow",_="%s/workflow/%s/job",s="https://app.circleci.com",S=a.a.getLogger("CCClient"),o=function(){function t(e){h()(this,t),this.url=e.apiUrl,this.organization=e.orgName,this.repositories=e.repositories,this.projectType=e.projectType,this.accessToken=e.accessToken,this.proxyServer=e.proxyServer,this.proxyUsername=e.proxyUsername,this.proxyPassword=e.proxyPassword}function e(e,t){return r.apply(this,arguments)}var r,n,a,i,s;function o(e){return n.apply(this,arguments)}function c(e,t){return a.apply(this,arguments)}function u(e,t){return i.apply(this,arguments)}function l(e){return s.apply(this,arguments)}return m()(t,[{key:"getProject",value:(s=f()(k.a.mark(function e(r){var n,a;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return n=d.a.format(v,this.url,this.projectType,this.organization,r),t.next=3,this.doRequest("GET",n);case 3:if((a=t.sent).success)return t.abrupt("return",a.payload);t.next=8;break;case 8:throw S.error(a.error),a.error;case 10:case"end":return t.stop()}},e,this)})),l)},{key:"getPipelines",value:(i=f()(k.a.mark(function e(r,n){var a,i;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return a=n?d.a.format(b,this.url,this.projectType,this.organization,r,n):d.a.format(g,this.url,this.projectType,this.organization,r),t.next=3,this.doRequest("GET",a);case 3:if((i=t.sent).success)return t.abrupt("return",i.payload);t.next=8;break;case 8:throw S.error(i.error),i.error;case 10:case"end":return t.stop()}},e,this)})),u)},{key:"getWorkflows",value:(a=f()(k.a.mark(function e(r,n){var a,i;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return a=n?d.a.format(x,this.url,r,n):d.a.format(w,this.url,r),t.next=3,this.doRequest("GET",a);case 3:if((i=t.sent).success)return t.abrupt("return",i.payload);t.next=8;break;case 8:throw S.error(i.error),i.error;case 10:case"end":return t.stop()}},e,this)})),c)},{key:"getJobs",value:(n=f()(k.a.mark(function e(r){var n,a;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return n=d.a.format(_,this.url,r),t.next=3,this.doRequest("GET",n);case 3:if((a=t.sent).success)return t.abrupt("return",a.payload);t.next=8;break;case 8:throw S.error(a.error),a.error;case 10:case"end":return t.stop()}},e,this)})),o)},{key:"doRequest",value:(r=f()(k.a.mark(function e(r,n){var a,i,s,o,i,s,a,a,c=arguments;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return a=2<c.length&&void 0!==c[2]?c[2]:null,s=4<c.length&&void 0!==c[4]&&c[4],o=!(5<c.length&&void 0!==c[5])||c[5],(i=3<c.length&&void 0!==c[3]?c[3]:{}).Accept="application/json",i["Content-Type"]="application/json",i={method:r,uri:n,headers:i,auth:{user:this.accessToken,pass:""},json:!0,resolveWithFullResponse:s},null!=a&&(i.body=a),s=p.a.defaults({proxy:null}),void 0!==this.proxyServer&&(a=new y.a(this.proxyServer),a="".concat(a.protocol,"//").concat(this.proxyUsername,":").concat(this.proxyPassword,"@").concat(a.host),S.debug("Running with Proxy: ".concat(a)),s=p.a.defaults({proxy:a})),S.debug("Running HTTP request with options:\r\n".concat(JSON.stringify(i))),t.abrupt("return",s(i).then(function(e){return S.debug("HTTP Response body: ".concat(JSON.stringify(e))),{success:!0,payload:e}}).catch(function(e){return{success:!1,error:e}}));case 12:case"end":return t.stop()}},e,this)})),e)}]),t}(),t=r(11),P=r.n(t),C=function(){function e(){h()(this,e)}return m()(e,null,[{key:"init",value:function e(t,r,n){this.tenantId=t,this.integrationId=r,this.integrationName=n,this.typePrefix="ucv-ext-circleci"}},{key:"commonTransform",value:function e(t,r){r.tenant_id=this.tenantId,r.external_id=t.id,r.name=t.name}},{key:"transformApp",value:function e(t){var r={active:!0,type:this.typePrefix};return this.commonTransform(t,r),r.external_id=t.slug,r.json_data={},r.json_data.integration_id=this.integrationId,r}},{key:"transformProcess",value:function e(t,r){var n={external_app_id:t.project_slug,active:!0,type:this.typePrefix};return this.commonTransform(t,n),n.external_id="".concat(r.name,"/").concat(t.name),n.name="".concat(r.name,"/").concat(t.name),n.json_data={},n.json_data.instanceName=this.integrationName,n.parameters={name:"Pipeline Number",type:"TextParameterDefinition",description:"Pipeline Execution Number"},n}},{key:"transformJobExecutionsOld",value:function e(t,r,n){var a,i;switch(t.status){case"failed":a="failure";break;case"on_hold":case"blocked":a="in_progress";break;case"success":a="success";break;default:a="failure"}return{tenantId:this.tenantId,id:n.number.toString(),name:n.number.toString(),versionName:n.number.toString(),status:a,application:{name:r.name,external_id:r.slug},url:"".concat(s,"/").concat(r.slug,"/").concat(t.job_number),startTime:t.started_at,endTime:t.stopped_at||void 0,requestor:n.trigger.actor.login,revision:n.vcs.revision,labels:t.name,history:[]}}},{key:"getBuildStatus",value:function e(t){var r;switch(t){case"failed":r="failure";break;case"on_hold":case"blocked":r="in_progress";break;case"success":r="success";break;default:r="failure"}return r}},{key:"getDeploymentResult",value:function e(t){var r;switch(t){case"failed":case"blocked":r="FAULTED";break;case"on_hold":r="AWAITING_APPROVAL";break;case"success":r="SUCCEEDED";break;default:r="FAULTED"}return r}},{key:"transformJobExecutions",value:function e(t,r,n,a){var i;return{externalId:n.number.toString(),externalProcessId:"".concat(a.name,"/").concat(t.name),name:n.number.toString(),tenantId:this.tenantId,startTime:t.started_at,endTime:t.stopped_at||void 0,type:"uvc-ext-circleci",url:"".concat(s,"/").concat(r.slug,"/").concat(t.job_number),labels:[t.name],steps:[],status:this.getBuildStatus(t.status),parameters:[{name:"Pipeline Number",value:n.number.toString()}],buildData:{requestor:n.trigger.actor.login,revision:n.vcs.revision,branch:n.vcs.branch,history:[],teams:[],number:t.job_number,versionName:n.number.toString()},deployData:{result:this.getDeploymentResult(t.status),byUser:n.trigger.actor.login},jsonData:{}}}},{key:"transformDeployments",value:function e(t,r){var n=i.a.get(t,"releaseEnvironment.name","default"),a;return{name:t.number,tenant_id:this.tenantId,id_external:t.id,version_id_external:t.number,version_name:t.number,application:{name:r.name,external_id:r.slug},type:this.typePrefix,start_time:t.created_at,end_time:t.completedOn,environment_id:t.definitionEnvironmentId.toString(),environment_name:n,by_user:i.a.get(t,"requestedBy.displayName","default"),url:t.release.webAccessUri,result:this.getTaskStatus(t.deploymentStatus)}}},{key:"getTaskStatus",value:function e(t){var r,n;switch(t){case"failed":case"partiallySucceeded":r="failure";break;case"inProgress":case"notDeployed":case"undefined":r="in_progress";break;case"succeeded":r="success";break;default:r="failure"}return r}},{key:"getPipelineRunStatus",value:function e(t){var r=t.result,n,a;switch(t.state){case"canceling":case"inProgress":case"unknown":a="in_progress";break;case"completed":switch(r){case"canceled":case"failed":case"unknown":a="failure";break;case"succeeded":a="success"}break;default:a="failure"}return a}},{key:"transformPipelineExecutions",value:function e(t,r){var n;return{name:"CI job deployment",tenant_id:this.tenantId,id_external:t.id.toString(),version_id_external:t.id.toString(),version_name:t.name,application:{name:r.name,external_id:r.id},type:this.typePrefix,start_time:t.createdDate,end_time:t.finishedDate,environment_id:"Pipeline Env-".concat(t.pipeline.id),environment_name:"Pipeline Env-".concat(t.pipeline.name),by_user:"Azure Pipeline",url:t.logUrl,result:this.getPipelineRunStatus(t),json:t}}}]),e}(),T=r(12),I=a.a.getLogger("UCVClient"),j=function(){function e(){h()(this,e)}function t(e){return r.apply(this,arguments)}var r,n,a,i,s,o;function c(e){return n.apply(this,arguments)}function u(e){return a.apply(this,arguments)}function l(e){return i.apply(this,arguments)}function p(e){return s.apply(this,arguments)}function d(e,t){return o.apply(this,arguments)}return m()(e,null,[{key:"initialize",value:(o=f()(k.a.mark(function e(r,n){return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:this.binding||(I.info("Initializing Velocity API Client."),this.binding=new T.VelocityApi(r,n,{insecure:!0,useBearerToken:!1}));case 1:case"end":return t.stop()}},e,this)})),d)},{key:"uploadBuilds",value:(s=f()(k.a.mark(function e(r){var n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return I.debug("syncing builds: ".concat(JSON.stringify(r))),t.prev=1,t.next=4,this.binding.mutation.uploadBuildDataBulk({data:r});case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(1),I.error(t.t0),t.t0;case 12:case"end":return t.stop()}},e,this,[[1,8]])})),p)},{key:"getIntegrationById",value:(i=f()(k.a.mark(function e(r){var n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.binding.query.integrationById({id:r});case 3:return n=t.sent,I.debug("Integration data is ".concat(JSON.stringify(n))),t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(0),I.error(t.t0),t.t0;case 12:case"end":return t.stop()}},e,this,[[0,8]])})),l)},{key:"uploadApplications",value:(a=f()(k.a.mark(function e(r){var n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return I.debug("syncing applications: ".concat(JSON.stringify(r))),t.prev=1,t.next=4,this.binding.mutation.uploadApplications({applications:r});case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(1),I.error(t.t0),t.t0;case 12:case"end":return t.stop()}},e,this,[[1,8]])})),u)},{key:"uploadProcesses",value:(n=f()(k.a.mark(function e(r){var n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return I.debug("syncing processes: ".concat(JSON.stringify([r]))),t.prev=1,t.next=4,this.binding.mutation.uploadProcesses({processes:r});case 4:return n=t.sent,t.abrupt("return",n);case 8:throw t.prev=8,t.t0=t.catch(1),I.error(t.t0),t.t0;case 12:case"end":return t.stop()}},e,this,[[1,8]])})),c)},{key:"uploadExecutions",value:(r=f()(k.a.mark(function e(r){var n,n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return I.debug("syncing executions: ".concat(JSON.stringify([r]))),n="{\n    ... on DeployMetrics {\n      deployName: name\n    }\n    ... on ExecutionData {\n      executionName: name\n    }\n    ... on BuildData{\n      buildName: name    }\n}",t.prev=2,t.next=5,this.binding.mutation.uploadExecutions({executions:r},n);case 5:return n=t.sent,t.abrupt("return",n);case 9:throw t.prev=9,t.t0=t.catch(2),I.error(t.t0),t.t0;case 13:case"end":return t.stop()}},e,this,[[2,9]])})),t)}]),e}(),t=r(7),E=r.n(t);function q(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=c(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,e;return{s:e=function e(){},n:function e(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function e(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=!0,i=!1,s;return{s:function e(){r=t[Symbol.iterator]()},n:function e(){var t=r.next();return a=t.done,t},e:function e(t){i=!0,s=t},f:function e(){try{a||null==r.return||r.return()}finally{if(i)throw s}}}}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=a.a.getLogger("CCUtil"),l=function(){function e(){h()(this,e)}function t(e,t,r,n){return a.apply(this,arguments)}var a,i,r,n,s,o;function c(e,t,r,n){return i.apply(this,arguments)}function u(e,t){return r.apply(this,arguments)}function l(e,t){return n.apply(this,arguments)}function p(e,t,r,n){return s.apply(this,arguments)}function d(e,t,r,n){return o.apply(this,arguments)}return m()(e,null,[{key:"syncPipeline",value:(o=f()(k.a.mark(function e(r,n,a,i){var s=this,o,c,u,l,p,l,d;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return o=[],u=c=0,l=n.lastRun,p=E()(l).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),t.next=7,j.getIntegrationById(n.trackerId);case 7:return l=t.sent,C.init(n.tenantId,n.trackerId,l.name),a.forEach(function(e){o.push(s.getDeploymentData(r,p,e,i))}),t.next=12,Promise.all(o);case 12:(d=t.sent).forEach(function(e){c+=e.processCounter,u+=e.executionCounter}),A.info("Synced ".concat(a.length," projects ").concat(c," processes and ").concat(u," executions")),A.info("CircleCI Pipeline and Release data synced successfully.");case 16:case"end":return t.stop()}},e)})),d)},{key:"getDeploymentData",value:(s=f()(k.a.mark(function e(r,n,a,i){var s,s;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getApplication(r,a);case 2:return s=t.sent,t.next=5,this.getJobExecutions(r,n,a,s,i);case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}},e,this)})),p)},{key:"getApplication",value:(n=f()(k.a.mark(function e(r,n){var a,i,s;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.next=3,r.getProject(n);case 3:if(i=t.sent,s=C.transformApp(i),a.push(s),0<a.length)return t.next=9,j.uploadApplications(a);t.next=10;break;case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},e)})),l)},{key:"getJobs",value:(r=f()(k.a.mark(function e(r,n){var a,i;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.next=3,n.getJobs(r.id);case 3:if(null!==(i=t.sent).items[0])return i.items.forEach(function(e){a.push(C.transformProcess(e,r))}),t.abrupt("return",a);t.next=9;break;case 9:throw A.error("No jobs in CircleCI workflow ".concat(r.id)),new Error("No jobs in CircleCI workflow ".concat(r.id));case 11:case"end":return t.stop()}},e)})),u)},{key:"getJobExecutionsOld",value:(i=f()(k.a.mark(function e(s,o,r,c){var u,n,a,l,n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return u=[],t.next=3,s.getPipelines(r);case 3:n=t.sent,a=q(n.items),t.prev=5,n=k.a.mark(function e(){var a,r,n,i,r;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:if((a=l.value).updated_at>o)return t.next=4,s.getWorkflows(a.id);t.next=21;break;case 4:r=t.sent,n=q(r.items),t.prev=6,r=k.a.mark(function e(){var r,n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return r=i.value,t.next=3,s.getJobs(r.id);case 3:(n=t.sent).items.forEach(function(e){e.started_at&&e.started_at>o&&u.push(C.transformJobExecutions(e,c,a,r))});case 5:case"end":return t.stop()}},e)}),n.s();case 9:if((i=n.n()).done){t.next=13;break}return t.delegateYield(r(),"t0",11);case 11:t.next=9;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(6),n.e(t.t1);case 18:return t.prev=18,n.f(),t.finish(18);case 21:case"end":return t.stop()}},e,null,[[6,15,18,21]])}),a.s();case 8:if((l=a.n()).done){t.next=12;break}return t.delegateYield(n(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),a.e(t.t1);case 17:return t.prev=17,a.f(),t.finish(17);case 20:if(0<u.length)return t.next=23,j.uploadExecutions(u);t.next=24;break;case 23:return t.abrupt("return",u.length);case 24:case"end":return t.stop()}},e,null,[[5,14,17,20]])})),c)},{key:"getJobExecutions",value:(a=f()(k.a.mark(function e(s,o,r,c){var n,a,u,l,i,p,d,f,h,m,y,v,b,g,x,x;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return u=[],l=[],i=[],d=p=!(a=n=0),h=!(f=null),m=null,t.next=12,s.getPipelines(r);case 12:if(null==(y=t.sent).items[0]){t.next=57;break}case 14:if(!p){t.next=54;break}v=q(y.items),t.prev=16,g=k.a.mark(function e(){var a,r,n,i,r;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=b.value).updated_at>o)){t.next=29;break}d=!0;case 3:if(d)return t.next=6,s.getWorkflows(a.id,f);t.next=27;break;case 6:r=t.sent,f=r.next_page_token,n=q(r.items),t.prev=9,r=k.a.mark(function e(){var r,n;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:r=i.value,h=!0;case 2:if(h)return t.next=5,s.getJobs(r.id);t.next=11;break;case 5:n=t.sent,m=n.next_page_token,n.items.forEach(function(e){e.started_at&&e.started_at>o&&(l.push(C.transformProcess(e,r)),u.push(C.transformJobExecutions(e,c,a,r)))}),m||(h=!1),t.next=2;break;case 11:case"end":return t.stop()}},e)}),n.s();case 12:if((i=n.n()).done){t.next=16;break}return t.delegateYield(r(),"t0",14);case 14:t.next=12;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(9),n.e(t.t1);case 21:return t.prev=21,n.f(),t.finish(21);case 24:f||(d=!1),t.next=3;break;case 27:t.next=30;break;case 29:p=!1;case 30:case"end":return t.stop()}},e,null,[[9,18,21,24]])}),v.s();case 19:if((b=v.n()).done){t.next=23;break}return t.delegateYield(g(),"t0",21);case 21:t.next=19;break;case 23:t.next=28;break;case 25:t.prev=25,t.t1=t.catch(16),v.e(t.t1);case 28:return t.prev=28,v.f(),t.finish(28);case 31:if(x=l.map(function(e){return[e.name,e]}),x=new Map(x),0<(i=P()(x.values())).length)return n+=i.length,t.next=38,j.uploadProcesses(i);t.next=40;break;case 38:l=[],i=[];case 40:if(0<u.length)return a+=u.length,t.next=44,j.uploadExecutions(u);t.next=45;break;case 44:u=[];case 45:if(y.next_page_token)return t.next=48,s.getPipelines(r,y.next_page_token);t.next=51;break;case 48:y=t.sent,t.next=52;break;case 51:p=!1;case 52:t.next=14;break;case 54:return t.abrupt("return",{processCounter:n,executionCounter:a});case 57:throw A.error("CircleCI Pipeline should run atleast once before the plugin can sync the data"),new Error("CircleCI Pipeline should run atleast once before the plugin can sync the data");case 59:case"end":return t.stop()}},e,null,[[16,25,28,31]])})),t)}]),e}(),D=a.a.getLogger("syncCCPipeline");function N(e,t){return R.apply(this,arguments)}function R(){return(R=f()(k.a.mark(function e(r,n){var a;return k.a.wrap(function e(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new o(n),D.debug("Integration State: ".concat(JSON.stringify(r))),D.info("Syncing CirclCI data since lastRun of the plugin at ".concat(E()(r.lastRun).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"))),j.initialize(r.apiServerUrl,n.accelerateAccessKey),t.next=7,l.syncPipeline(a,r,n.repositories,n.apiUrl);case 7:return t.abrupt("return",{type:"PR",source:"CircleCI",data:[]});case 10:throw t.prev=10,t.t0=t.catch(0),D.error(t.t0),t.t0;case 14:case"end":return t.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}var U,t={properties:[{label:"HCL Accelerate User Access Key",name:"accelerateAccessKey",type:"Secure",description:"The user access key to authenticate with the HCL Accelerate server.",required:!0,defaultValue:"0e713f25-5af8-4382-a84d-a06a0b1b51ca"},{label:"API URL",name:"apiUrl",description:"API URL of CircleCI.",required:!0,type:"String",defaultValue:"https://circleci.com/api/v2"},{label:"Project type (VCS provider)",name:"projectType",type:"String",description:"The Version Control System that is used, eg: github, bitbucket.",defaultValue:"gh",required:!0},{label:"Organization Name",name:"orgName",type:"String",description:"The username or organization name in version control system.",required:!0,defaultValue:"deepaannjohn"},{label:"Repositories",name:"repositories",type:"Array",description:"A list of repositories from which to import pull requests, commits, and build data.",required:!0,defaultValue:["circleci-workflow-oriented"]},{label:"Access Token",name:"accessToken",type:"Secure",description:"The access token to authenticate with the CircleCI server.",required:!0,defaultValue:"46100d9ff9b7cdcc4502cbde7844aa17e83d83f9"},{name:"proxyServer",label:"Proxy Server",type:"String",description:"The URL of the proxy server including the port number. The URL protocol can be http or https.",required:!1,hidden:!0},{name:"proxyUsername",label:"Proxy User Name",type:"String",description:"The user name used to authenticate with the proxy server.",required:!1,hidden:!0},{name:"proxyPassword",label:"Proxy Password",type:"Secure",description:"The password used to authenticate with the proxy server.",required:!1,hidden:!0}],endpoints:[],scheduledEvents:[{execute:N,name:"SyncCCPipeline",description:"Sync CircleCI Pipeline data.",interval:5}],taskDefinitions:[],eventTriggers:[],qualityHandlers:[],pipelineDefinition:{importsApplications:!0,importsVersions:!1,importsEnvironments:!1},displayName:"CircleCI",pluginId:"ucv-ext-circleci",description:"The CircleCI plug-in imports and synchronizes CI/CD data from CircleCI."},O;new n.a(t,a.a).run()}]);
//# sourceMappingURL=ucv-ext-circleci-runnable.min.js.map